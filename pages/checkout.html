<!DOCTYPE html>
<html>

<head>
    <title>Buy Now</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial;
            background: #eff7ef;
            display: flex;
            justify-content: center;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            max-width: 600px;
            width: 100%;
        }

        .product {
            text-align: center;
        }

        .product img {
            width: 260px;
            max-width: 100%;
            border-radius: 10px;
        }

        form input,
        textarea {
            width: 96%;
            padding: 12px;
            margin: 6px 0;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 15px;
        }

        button {
            background: #c4894f;
            color: white;
            border: none;
            width: 100%;
            padding: 15px;
            border-radius: 6px;
            font-size: 18px;
            cursor: pointer;
        }

    
    </style>
</head>

<body>

    <div class="container">

        <div class="product">
            <img id="pImg">
            <h2 id="pName"></h2>
            <h3>Price: Rs <span id="pPrice"></span></h3>
        </div>
        <div class="priceBox">Price: Rs <span id="price">1699</span></div>

        <br>

        <!-- Quantity Selector -->
        <select id="qty" style="width: 100%;padding: 12px;" onchange="updatePrice()">
            <option value="1">1 Item</option>
            <option value="2">2 Items</option>
            <option value="3">3 Items</option>
            <option value="4">4 Items</option>
            <option value="5">5 Items</option>
        </select>

        <form id="orderForm">
            <input name="fname" placeholder="First Name" required>
            <input name="lname" placeholder="Last Name" required>
            <input name="email" type="email" placeholder="Email" required>
            <input name="phone" type="tel" placeholder="Phone Number" required>
            <textarea name="address" placeholder="House no / Plot no / Full Address" required></textarea>
            <input name="pincode" placeholder="Pincode" required>
            <input name="district" placeholder="District" required>
            <input name="state" placeholder="State" required>
            <button type="submit">Submit Order</button>
        </form>

    </div>

    <script>
        const params = new URLSearchParams(location.search);
        document.getElementById('pName').innerText = params.get('name');
        document.getElementById('pPrice').innerText = params.get('price');
        document.getElementById('pImg').src = params.get('img');

        document.getElementById('orderForm').addEventListener('submit', function (e) {
            e.preventDefault();

            let data = new FormData(this);
            data.append("product", params.get('name'));
            data.append("price", params.get('price'));

            fetch('submit.php', {
                method: "POST",
                body: data
            }).then(() => alert("Order Submitted Successfully!"));
        });


        const basePrice = 1699;

    function updatePrice() {
        let qty = document.getElementById('qty').value;
        let total = basePrice * qty;
        document.getElementById('price').innerText = total;
    }

    function addToCart() {
        let qty = document.getElementById('qty').value;
        let total = basePrice * qty;
        alert(qty + " item(s) added to cart. Total: Rs " + total);
    }
    </script>

    

</body>

</html>